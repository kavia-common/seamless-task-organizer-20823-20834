{"is_source_file": true, "format": "TypeScript", "description": "This file defines API interaction functions for a task management frontend, including environment configuration, request helpers, and task CRUD operations.", "external_files": [".env.local", ".env.example"], "external_methods": ["fetch"], "published": ["getApiBaseUrl", "listTasks", "createTask", "updateTask", "deleteTask", "completeTask", "uncompleteTask", "Task"], "classes": [], "methods": [{"name": "export function getApiBaseUrl(): string { getApiBaseUrl", "description": "Returns the API base URL from environment variables or fallback.", "scope": "", "scopeKind": ""}, {"name": "async function request<T>( request", "description": " Helper to standardize JSON fetch requests, handling errors and JSON parsing.", "scope": "", "scopeKind": ""}, {"name": "async function safeJson(res: Response) { safeJson", "description": " Helper to safely parse JSON from fetch response, returning null on error.", "scope": "", "scopeKind": ""}, {"name": "export async function listTasks(q?: string): Promise<Task[]> { listTasks", "description": "Fetches a list of tasks, with optional filtering by query string.", "scope": "", "scopeKind": ""}, {"name": "export async function createTask(payload: { createTask", "description": "Creates a new task with a title and optional description.", "scope": "", "scopeKind": ""}, {"name": "export async function updateTask( updateTask", "description": "Updates specified fields of an existing task identified by id.", "scope": "", "scopeKind": ""}, {"name": "export async function deleteTask(id: number): Promise<{ success: boolean }> { deleteTask", "description": "Deletes a task by id.", "scope": "", "scopeKind": ""}, {"name": "export async function completeTask(id: number): Promise<Task> { completeTask", "description": "Marks a task as complete by id.", "scope": "", "scopeKind": ""}, {"name": "export async function uncompleteTask(id: number): Promise<Task> { uncompleteTask", "description": "Marks a task as incomplete by id.", "scope": "", "scopeKind": ""}], "calls": ["getApiBaseUrl()", "request()", "safeJson()", "listTasks()", "createTask()", "updateTask()", "deleteTask()", "completeTask()", "uncompleteTask()"], "search-terms": ["api.ts", "Task", "fetch helper", "task CRUD", "environment variable fetch", "TypeScript API functions"], "state": 2, "file_id": 12, "knowledge_revision": 27, "git_revision": "", "ctags": [{"_type": "tag", "name": "Task", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^export type Task = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^  const base = process.env.NEXT_PUBLIC_API_BASE_URL;$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^    const body = await safeJson(res);$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "completeTask", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^export async function completeTask(id: number): Promise<Task> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createTask", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^export async function createTask(payload: {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "deleteTask", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^export async function deleteTask(id: number): Promise<{ success: boolean }> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getApiBaseUrl", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^export function getApiBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^  const headers: HeadersInit = {$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "listTasks", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^export async function listTasks(q?: string): Promise<Task[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^    const message =$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "qs", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^  const qs = q ? `?q=${encodeURIComponent(q)}` : \"\";$/", "language": "TypeScript", "kind": "constant", "scope": "listTasks", "scopeKind": "function"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^async function request<T>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(url, { ...options, headers, cache: \"no-store\" });$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "safeJson", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^async function safeJson(res: Response) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "uncompleteTask", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^export async function uncompleteTask(id: number): Promise<Task> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updateTask", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^export async function updateTask($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/seamless-task-organizer-20823-20834/to_do_frontend/src/lib/api.ts", "pattern": "/^  const url = `${getApiBaseUrl()}${path}`;$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}], "hash": "3aa165e40523c296e1ad424b02a925b4", "format-version": 4, "code-base-name": "to_do_frontend", "filename": "to_do_frontend/src/lib/api.ts", "revision_history": [{"27": ""}]}